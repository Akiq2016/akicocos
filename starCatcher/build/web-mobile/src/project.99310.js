require=function(){return function t(e,i,a){function s(r,o){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!o&&c)return c(r,!0);if(n)return n(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){return s(e[r][1][t]||t)},u,u.exports,t,e,i,a)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<a.length;r++)s(a[r]);return s}}()({GameOver:[function(t,e,i){"use strict";cc._RF.push(e,"986acUAmpdC/ac9lEzRyn/3","GameOver");var a=t("global");cc.Class({extends:cc.Component,properties:{scoreLabel:{default:null,type:cc.Label}},start:function(){this.setScore(a.lastScore)},setScore:function(t){var e=this.scoreLabel.string;this.scoreLabel.string=e.slice(0,e.indexOf(":")+2)+t},startGame:function(){cc.director.loadScene("game",function(){cc.director.getScene().getChildByName("game").getComponent("Game").startGame()})}}),cc._RF.pop()},{global:"global"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"788bbSjQHxCSYhrtP1Vc2Jv","Game");var a=t("global");cc.Class({extends:cc.Component,properties:{maxStarDuration:0,minStarDuration:0,starPrefab:{default:null,type:cc.Prefab},starProgress:{default:null,type:cc.ProgressBar},ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},startBtn:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},scoreAudio:{default:null,type:cc.AudioClip},gameHint:{default:null,type:cc.Label},gameHintOnDesktop:{default:"",multiline:!0},gameHintOnMobile:{default:"",multiline:!0}},onLoad:function(){this.groundY=this.ground.y+this.ground.height/2,this.enabled=!1,this.setGameHint(),this.starPool=new cc.NodePool("Star")},update:function(t){this.starPool.size()>=1?(this.gameOver(),this.enabled=!1):(this.timer+=t,this.updateStarProgress())},onEnable:function(){this.score=0,this.generateStarProgress(),this.setNewStarRelated(),this.player.active=!0,this.player.getComponent("Player").enabled=!0},generateStarProgress:function(){this.starProgress.node.active=!0,this.starProgress.reverse=!1},updateStarProgress:function(){this.starProgress.progress=(this.star.opacity-5)/250},setNewStarRelated:function(){this.generateStar(),this.resetParamsThatDependOnStar()},generateStar:function(){this.star=this.starPool.size()>=1?this.starPool.get():cc.instantiate(this.starPrefab),this.node.addChild(this.star),this.star.setPosition(this.getStarPosition()),this.star.getComponent("Star").init(this)},resetParamsThatDependOnStar:function(){this.timer=0,this.starDuration=this.getStarDuration(),this.starProgress.progress=1},getStarDuration:function(){return this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration)},getStarPosition:function(){var t=this.groundY+this.star.height/2+Math.random()*this.player.getComponent("Player").jumpHeight,e=2*(Math.random()-.5)*((this.node.width-this.star.width)/2);return console.log(t),cc.v2(e,t)},gainScore:function(){var t=this.scoreLabel.string;this.score+=1,this.scoreLabel.string=t.slice(0,t.indexOf(":")+2)+this.score,cc.audioEngine.play(this.scoreAudio,!1)},setGameHint:function(){this.gameHint.string=cc.sys.isMobile?this.gameHintOnMobile:this.gameHintOnDesktop},startGame:function(){this.enabled=!0,this.startBtn.active=!1},gameOver:function(){a.lastScore=this.score,cc.director.loadScene("gameover")}}),cc._RF.pop()},{global:"global"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"055ad2u7IVAgbtoFXT4nUQT","Player"),cc.Class({extends:cc.Component,properties:{jumpHeight:0,jumpDuration:0,deformDuration:0,maxMoveSpeed:0,acceleration:0,jumpAudio:{default:null,type:cc.AudioClip},game:{default:null,type:cc.Node}},onLoad:function(){this.enabled=!1,this.leftAccelarate=!1,this.rightAccelarate=!1,this.xSpeed=0,this.maxMoveX=this.node.parent.width-this.node.width,this.initKeyboardEvent()},start:function(){},onEnable:function(){this.node.setPosition(cc.v2(0,this.game.getComponent("Game").groundY)),this.node.runAction(this.setJumpAction())},update:function(t){this.leftAccelarate?this.xSpeed-=this.acceleration*t:this.rightAccelarate&&(this.xSpeed+=this.acceleration*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.node.x+this.xSpeed*t)<this.maxMoveX/2?this.node.x+=this.xSpeed*t:this.xSpeed=0},setJumpAction:function(){var t=cc.scaleTo(this.deformDuration,1,.6),e=cc.scaleTo(this.deformDuration,1,1),i=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),a=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),s=cc.callFunc(function(){cc.audioEngine.play(this.jumpAudio,!1)},this);return cc.repeatForever(cc.sequence(t,e,i,a,s))},initKeyboardEvent:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){switch(t.keyCode){case cc.macro.KEY.left:this.leftAccelarate=!0;break;case cc.macro.KEY.right:this.rightAccelarate=!0}},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(t){switch(t.keyCode){case cc.macro.KEY.left:this.leftAccelarate=!1;break;case cc.macro.KEY.right:this.rightAccelarate=!1}},this)}}),cc._RF.pop()},{}],Star:[function(t,e,i){"use strict";cc._RF.push(e,"d1415RAGqxEEpfXxsXrVmlw","Star"),cc.Class({extends:cc.Component,properties:{pickRadius:0,game:{default:null,serializable:!1}},onLoad:function(){this.enable=!1},init:function(t){this.game=t,this.enable=!0,this.node.opacity=255},update:function(t){if(this.getToPlayerDistance()<this.pickRadius)this.onPicked();else{var e=1-this.game.timer/this.game.starDuration;this.node.opacity=Math.floor(255*e),this.node.opacity<5&&this.game.starPool.put(this.node)}},getToPlayerDistance:function(){return this.node.position.sub(this.game.player.position).mag()},onPicked:function(){this.game.gainScore(),this.game.starPool.put(this.node),this.game.setNewStarRelated()}}),cc._RF.pop()},{}],global:[function(t,e,i){"use strict";cc._RF.push(e,"6bf96gX4zZPMIn/zwZQ8m1m","global"),e.exports={lastScore:0},cc._RF.pop()},{}]},{},["Game","GameOver","Player","Star","global"]);