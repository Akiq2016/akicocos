require=function(){return function t(e,i,s){function r(n,c){if(!i[n]){if(!e[n]){var o="function"==typeof require&&require;if(!c&&o)return o(n,!0);if(a)return a(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[n]={exports:{}};e[n][0].call(u.exports,function(t){return r(e[n][1][t]||t)},u,u.exports,t,e,i,s)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<s.length;n++)r(s[n]);return r}}()({GameOver:[function(t,e,i){"use strict";cc._RF.push(e,"986acUAmpdC/ac9lEzRyn/3","GameOver");var s=t("global");cc.Class({extends:cc.Component,properties:{scoreLabel:{default:null,type:cc.Label}},start:function(){this.setScore(s.lastScore)},setScore:function(t){var e=this.scoreLabel.string;this.scoreLabel.string=e.slice(0,e.indexOf(":")+2)+t},startGame:function(){cc.director.loadScene("game",function(){cc.director.getScene().getChildByName("game").getComponent("Game").startGame()})}}),cc._RF.pop()},{global:"global"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"788bbSjQHxCSYhrtP1Vc2Jv","Game");var s=t("global");cc.Class({extends:cc.Component,properties:{maxStarDuration:0,minStarDuration:0,starPrefab:{default:null,type:cc.Prefab},starProgress:{default:null,type:cc.ProgressBar},ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},startBtn:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},scoreAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.groundY=this.ground.y+this.ground.height/2,this.enabled=!1},update:function(t){cc.isValid(this.star)?(this.timer+=t,this.starProgress.progress=(this.star.opacity-5)/250):this.gameOver()},onEnable:function(){this.timer=0,this.starDuration=0,this.score=0,this.generateStarProgress(),this.generateStar(),this.player.getComponent("Player").enabled=!0},generateStarProgress:function(){this.starProgress.node.setPosition(0,this.node.y),this.starProgress.reverse=!1},generateStar:function(){this.star=cc.instantiate(this.starPrefab),this.node.addChild(this.star),this.star.setPosition(this.getStarPosition()),this.star.getComponent("Star").game=this,this.timer=0,this.starDuration=this.getStarDuration(),this.starProgress.progress=1},getStarDuration:function(){return this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration)},getStarPosition:function(){var t=this.groundY+Math.random()*this.player.getComponent("Player").jumpHeight,e=2*(Math.random()-.5)*(this.node.width/2);return cc.v2(e,t)},gainScore:function(){var t=this.scoreLabel.string;this.score+=1,this.scoreLabel.string=t.slice(0,t.indexOf(":")+2)+this.score,cc.audioEngine.play(this.scoreAudio,!1)},startGame:function(){this.enabled=!0,this.startBtn.destroy()},gameOver:function(){this.enabled=!1,s.lastScore=this.score,cc.director.loadScene("gameover")}}),cc._RF.pop()},{global:"global"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"055ad2u7IVAgbtoFXT4nUQT","Player"),cc.Class({extends:cc.Component,properties:{jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,acceleration:0,jumpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.enabled=!1,this.leftAccelarate=!1,this.rightAccelarate=!1,this.xSpeed=0,this.maxMoveX=this.node.parent.width-this.node.width,this.initKeyboardEvent()},start:function(){},onEnable:function(){this.node.runAction(this.setJumpAction())},update:function(t){this.leftAccelarate?this.xSpeed-=this.acceleration*t:this.rightAccelarate&&(this.xSpeed+=this.acceleration*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.node.x+this.xSpeed*t)<this.maxMoveX/2?this.node.x+=this.xSpeed*t:this.xSpeed=0},setJumpAction:function(){var t=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),e=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),i=cc.callFunc(function(){cc.audioEngine.play(this.jumpAudio,!1)},this);return cc.repeatForever(cc.sequence(t,e,i))},initKeyboardEvent:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){switch(t.keyCode){case cc.macro.KEY.left:this.leftAccelarate=!0;break;case cc.macro.KEY.right:this.rightAccelarate=!0}},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(t){switch(t.keyCode){case cc.macro.KEY.left:this.leftAccelarate=!1;break;case cc.macro.KEY.right:this.rightAccelarate=!1}},this)}}),cc._RF.pop()},{}],Star:[function(t,e,i){"use strict";cc._RF.push(e,"d1415RAGqxEEpfXxsXrVmlw","Star"),cc.Class({extends:cc.Component,properties:{pickRadius:0,game:{default:null,serializable:!1}},update:function(t){if(this.getToPlayerDistance()<this.pickRadius)this.onPicked();else{var e=1-this.game.timer/this.game.starDuration;this.node.opacity=Math.floor(255*e),this.node.opacity<5&&this.node.destroy()}},getToPlayerDistance:function(){return this.node.position.sub(this.game.player.getPosition()).mag()},onPicked:function(){this.game.generateStar(),this.game.gainScore(),this.node.destroy()}}),cc._RF.pop()},{}],global:[function(t,e,i){"use strict";cc._RF.push(e,"6bf96gX4zZPMIn/zwZQ8m1m","global"),e.exports={lastScore:0},cc._RF.pop()},{}]},{},["Game","GameOver","Player","Star","global"]);