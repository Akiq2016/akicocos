{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","game","default","serializable","update","dt","getToPlayerDistance","onPicked","opacityRate","timer","starDuration","node","opacity","Math","floor","pDistance","position","player","getPosition","generateStar","gainScore","destroy"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,gBAAY,CADF;AAEVC,UAAM;AACJC,eAAS,IADL;AAEJ;AACA;AACA;AACA;AACAC,oBAAc;AANV;AAFI,GAHL;;AAePC,QAfO,kBAeCC,EAfD,EAeK;AACV,QAAI,KAAKC,mBAAL,KAA6B,KAAKN,UAAtC,EAAkD;AAChD,WAAKO,QAAL;AACD,KAFD,MAEO;AACL,UAAIC,cAAc,IAAI,KAAKP,IAAL,CAAUQ,KAAV,GAAkB,KAAKR,IAAL,CAAUS,YAAlD;AACA,WAAKC,IAAL,CAAUC,OAAV,GAAoBC,KAAKC,KAAL,CAAW,MAAMN,WAAjB,CAApB;AACD;AACF,GAtBM;;;AAwBP;;;AAGAF,uBAAqB,+BAAY;AAC/B,WAAOX,GAAGoB,SAAH,CAAa,KAAKJ,IAAL,CAAUK,QAAvB,EAAiC,KAAKf,IAAL,CAAUgB,MAAV,CAAiBC,WAAjB,EAAjC,CAAP;AACD,GA7BM;;AA+BPX,YAAU,oBAAW;AACnB,SAAKN,IAAL,CAAUkB,YAAV;AACA,SAAKlB,IAAL,CAAUmB,SAAV;AACA,SAAKT,IAAL,CAAUU,OAAV;AACD;AAnCM,CAAT","file":"Star.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    pickRadius: 0,\r\n    game: {\r\n      default: null,\r\n      // Attributes that specify the default default value are serialized by default.\r\n      // After serialization, the values set in the editor are saved to the scene and other resource files,\r\n      // and the previously set values are automatically restored when the scene is loaded.\r\n      // If you do not want to serialize, you can set serializable: false.\r\n      serializable: false\r\n    }\r\n  },\r\n\r\n  update (dt) {\r\n    if (this.getToPlayerDistance() < this.pickRadius) {\r\n      this.onPicked();\r\n    } else {\r\n      var opacityRate = 1 - this.game.timer / this.game.starDuration;\r\n      this.node.opacity = Math.floor(255 * opacityRate);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @return {number} distance\r\n   */\r\n  getToPlayerDistance: function () {\r\n    return cc.pDistance(this.node.position, this.game.player.getPosition());\r\n  },\r\n\r\n  onPicked: function() {\r\n    this.game.generateStar();\r\n    this.game.gainScore();\r\n    this.node.destroy();\r\n  },\r\n});\r\n"]}